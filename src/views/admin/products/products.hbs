{{!< ../layouts/main}}

<div class="p-6 bg-white rounded shadow">
  <h2 class="text-xl font-bold mb-4">Lista de Productos</h2>

  <table class="min-w-full table-auto">
    <thead>
      <tr class="text-left">
        <th class="px-4 py-2">Imagen</th>
        <th class="px-4 py-2">Nombre</th>
        <th class="px-4 py-2">Descripción</th>
        <th class="px-4 py-2">Precio</th>
        <th class="px-4 py-2">Stock</th>
        <th class="px-4 py-2">Categoría</th>
        <th class="px-4 py-2">Acciones</th>
      </tr>
    </thead>
    <tbody>
      {{#each productos}}
        <tr>
          <td class="px-4 py-2">
            {{#if foto}}
              <img src="/images/products/{{foto}}" alt="Foto de {{nombre}}" class="w-12 h-12 object-cover rounded">
            {{else}}
              <span class="text-gray-400 italic">Sin foto</span>
            {{/if}}
          </td>
          <td class="px-4 py-2">{{nombre}}</td>
          <td class="px-4 py-2">{{descripcion}}</td>
          <td class="px-4 py-2">${{precio}}</td>
          <td class="px-4 py-2">{{stock}}</td>
          <td class="px-4 py-2">
            {{categoria_nombre}}
          </td>
          <td class="px-4 py-2">
            <a href="/admin/products/edit/{{cod_producto}}" class="text-blue-600 hover:underline">Editar</a> | 
            <a href="/admin/products/delete/{{cod_producto}}" class="text-red-600 hover:underline" onclick="return confirm('¿Estás seguro de que quieres eliminar este producto?')">Eliminar</a>
          </td>
        </tr>
      {{/each}}
    </tbody>
  </table>

  <a href="/admin/products/add" class="mt-4 inline-block bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700 transition">Agregar Nuevo Producto</a>
</div>