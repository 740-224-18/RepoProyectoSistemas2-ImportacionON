{{!< ../layouts/main}}

<div class="p-6 bg-white rounded shadow">
  <h2 class="text-xl font-bold mb-4">Lista de Empleados</h2>

  <table class="min-w-full table-auto">
    <thead>
      <tr class="text-left">
        <th class="px-4 py-2">Foto</th>
        <th class="px-4 py-2">Nombre</th>
        <th class="px-4 py-2">Apellido</th>
        <th class="px-4 py-2">Cédula</th>
        <th class="px-4 py-2">Celular</th>
        <th class="px-4 py-2">Dirección</th>
        <th class="px-4 py-2">Email</th>
        <th class="px-4 py-2">Cargo</th>
        <th class="px-4 py-2">Acciones</th>
      </tr>
    </thead>
    <tbody>
      {{#each empleados}}
      <tr>
        <td class="px-4 py-2">
          {{#if foto}}
            <img src="/images/employees/{{foto}}" alt="Foto de {{nombres}}" class="w-12 h-12 object-cover rounded-full">
          {{else}}
            <span class="text-gray-400 italic">Sin foto</span>
          {{/if}}
        </td>
        <td class="px-4 py-2">{{nombres}}</td>
        <td class="px-4 py-2">{{apellidos}}</td>
        <td class="px-4 py-2">{{ci}}</td>
        <td class="px-4 py-2">{{celular}}</td>
        <td class="px-4 py-2">{{direccion}}</td>
        <td class="px-4 py-2">{{email}}</td>
       <td class="px-4 py-2">
         {{cargo_nombre}} <!-- Usamos el nombre del cargo directamente desde el JOIN -->
      </td>
        <td class="px-4 py-2">
          <a href="/admin/employees/edit/{{cod_empleado}}" class="text-blue-600 hover:underline">Editar</a> | 
          <a href="/admin/employees/delete/{{cod_empleado}}" class="text-red-600 hover:underline" onclick="return confirm('¿Estás seguro de que quieres eliminar este empleado?')">Eliminar</a>
        </td>
      </tr>
      {{/each}}
    </tbody>
  </table>

  <a href="/admin/employees/add" class="mt-4 inline-block bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700 transition">Agregar Nuevo Empleado</a>
</div>
