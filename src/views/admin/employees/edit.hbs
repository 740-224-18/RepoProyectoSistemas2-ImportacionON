{{!< ../layouts/main}}
<div class="p-6 max-w-xl mx-auto bg-white rounded shadow">
  <h2 class="text-xl font-bold mb-4">Editar Empleado</h2>

  <form action="/admin/employees/edit/{{empleado.cod_empleado}}" method="POST" enctype="multipart/form-data" class="space-y-4">
    <!-- Nombre -->
    <input type="text" name="nombres" value="{{empleado.nombres}}" required class="w-full p-2 border rounded">

    <!-- Apellido -->
    <input type="text" name="apellidos" value="{{empleado.apellidos}}" required class="w-full p-2 border rounded">

    <!-- CI -->
    <input type="text" name="ci" value="{{empleado.ci}}" required class="w-full p-2 border rounded">

    <!-- Celular -->
    <input type="tel" name="celular" value="{{empleado.celular}}" required class="w-full p-2 border rounded">

    <!-- Dirección -->
    <textarea name="direccion" placeholder="Dirección" class="w-full p-2 border rounded">{{empleado.direccion}}</textarea>

    <!-- Email -->
    <input type="email" name="email" value="{{empleado.email}}" required class="w-full p-2 border rounded">

    <!-- Cargo -->
    <select name="cod_cargo" class="w-full p-2 border rounded">
  <option value="" disabled>Seleccione un Cargo</option>
  {{#each cargos}}
    <option value="{{cod_cargo}}" {{#if (eq cod_cargo ../empleado.cod_cargo)}}selected{{/if}}>
      {{nombre}}
    </option>
  {{/each}}
</select>

    <!-- Foto -->
    <input type="file" name="foto" accept="image/*" class="w-full p-2 border rounded">

    <button type="submit" class="btn-gold">Actualizar</button>
  </form>

  <!-- Botón para agregar un cargo nuevo -->
  <button type="button" data-modal-toggle="addCargoModal" class="w-full bg-red-600 text-white py-2 px-4 rounded mt-4">
    Agregar Cargo
  </button>

  <!-- Modal para agregar un nuevo cargo -->
  <div id="addCargoModal" class="hidden fixed inset-0 bg-gray-500 bg-opacity-50 flex justify-center items-center">
    <div class="bg-white p-6 rounded-lg shadow-lg max-w-md w-full">
      <h3 class="text-xl font-bold mb-4">Agregar Nuevo Cargo</h3>
      <form action="/admin/employees/add-cargo" method="POST" class="space-y-4">
        <div>
          <label class="block text-gray-700">Nombre del Cargo</label>
          <input type="text" name="nombre" required class="w-full p-2 border rounded" placeholder="Ej. Gerente, Vendedor, etc.">
        </div>
        <div>
          <label class="block text-gray-700">Salario</label>
          <input type="number" name="salario" required step="0.01" class="w-full p-2 border rounded" placeholder="Ej. 2500.00">
        </div>
        <button type="submit" class="w-full bg-green-600 text-white py-2 px-4 rounded mt-4">Guardar Cargo</button>
      </form>
      <button type="button" class="mt-4 w-full bg-gray-500 text-white py-2 px-4 rounded" onclick="toggleModal()">Cerrar</button>
    </div>
  </div>
</div>

<script>
  // Función para mostrar y ocultar el modal
  function toggleModal() {
    const modal = document.getElementById('addCargoModal');
    modal.classList.toggle('hidden');
  }

  // Mostrar el modal cuando se presione el botón "Agregar Cargo"
  document.querySelector('[data-modal-toggle="addCargoModal"]').addEventListener('click', toggleModal);
</script>
